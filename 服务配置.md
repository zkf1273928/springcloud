##Config
SpringCloud Config为微服务架构中的微服务提供集中化的外部配置支持，配置服务器为各个不同微服务应用的所有环境提供了一个中心化的外部配置
分为Config客户端和服务端
###服务端
1.pom
```xml
<dependency>
    <groupId>org.springframework.cloud</groupId>
    <artifactId>spring-cloud-config-server</artifactId>
</dependency>
```
2.yml
```yaml
server:
  port: 3344

spring:
  application:
    name: cloud-config-center #注册进eureka的服务名称
  cloud:
    config:
      server:
        git:
          uri: git@github.com:zzyybs/springclou-config.git #GitHub上面的放配置文件的git仓库名称
      #搜索目录
      search-paths:
        - springcloud-config
    #读取分支
    label: master

eureka:
  client:
    service-url:
      defaultZone: http://eureka7001.com:7001/eureka
```
3.主启动类
```java
@EnableConfigServer
```
4.配置文件的读法
* label分支、name服务名、profile环境（dev/test/prod）
* /{label}/{application}-{profile}.yml
* /{application}-{profile}.yml
* /{application}/{profile}[/{label}]
###客户端
1.pom
```xml
<dependency>
    <groupId>org.springframework.cloud</groupId>
    <artifactId>spring-cloud-config</artifactId>
</dependency>
```
2.bootstrap.yml(application.yml是用户级别的资源配置选项，bootstrap.yml是系统级的，优先级更高的，先加载)
```yaml
server:
  port: 3355

spring:
  application:
    name: config-client 
  cloud:
    ##Config客户端配置
    config:
      label: master #分支名称
      name: config #配置文件名称
      profile: dev #读取后缀名称 上面所述master分支的config-dev.yml的配置文件读取http://config-3344.com:master/config
      uri: http://localhost:3344 #配置中心地址K
#服务注册到eureka地址
eureka:
  client:
    service-url:
      defaultZone: http://eureka7001.com:7001/eureka
```
3.主启动类
```java
@EurekaClirnt
```
###config客户端动态刷新（修改git中的配置客户端需要重新启动项目）
1.在客户端引入监控pom
```xml
        <dependency>
            <groupId>org.springframework.boot</groupId>
            <artifactId>spring-boot-starter-web</artifactId>
        </dependency>
        <dependency>
            <groupId>org.springframework.boot</groupId>
            <artifactId>spring-boot-starter-actuator</artifactId>
        </dependency>
```
2.修改yml暴露监控端口
```yaml
#暴露监控端点
management:
  endpoints:
    web:
      exposure:
        include: "*"
```
3.加入注解(在客户端controller上面)
@RefreshScope
4.运维发送post请求刷新客户端
curl -X POST "http://localhost:3355/actuator/refresh"
只能实现手动版的动态刷新需要加入bus来实现精准刷新统一唤醒